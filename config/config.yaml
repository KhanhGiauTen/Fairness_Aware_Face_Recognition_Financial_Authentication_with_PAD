# ==========================================
# CẤU HÌNH HỆ THỐNG JOINT FAIRNESS-AWARE DSS
# ==========================================

system:
  device: "cuda" # Hoặc "cpu" nếu không có GPU

# 1. Cấu hình Model (SỬA LẠI TÊN HANDLE CHO ĐÚNG)
models:
  yolo:
    # Handle Kaggle chính xác từ code cũ của bạn
    handle: "khnhnguyn222/yolo-facedetection/pyTorch/default" 
    filename: "YOLO.pt"
    conf_threshold: 0.6

  deeppixbis:
    handle: "khnhnguyn222/deeppixbis/pyTorch/default"
    filename: "DeepPixBis.pt"

  arcface:
    handle: "khnhnguyn222/arcface-resnet34/pyTorch/default"
    filename: "ArcFace.pt"
    num_classes: 1000
    feature_dim: 512

  vit:
    handle: "khnhnguyn222/vision-transformer/pyTorch/default"
    filename: "ViT.pt"
    num_classes: 2

database:
  path: "database/known_faces_db.pt"

# Key cho code đọc đúng
known_db_path: "database/known_faces_db.pt"

# 2. Hợp nhất mô hình PAD (Ensemble Learning)
ensemble:
  vit_weight: 0.6      
  pixbis_weight: 0.4   
  spoof_threshold: 0.5 # <--- (QUAN TRỌNG) Đã thêm tham số này để sửa lỗi KeyError

# 3. Ngưỡng thích ứng (Adaptive Risk-Aware Thresholding)
adaptive_threshold:
  enable: true
  base_fr_threshold: 0.65      
  quality_penalty_weight: 0.15 
  min_quality_score: 0.3       

# 4. Hiệu chỉnh công bằng (Fairness Calibration)
fairness:
  enable: true
  bias_offset:
    female: 0.035      
    dark_skin: 0.025   
    default: 0.0

review_paths:
  needs_review: "data/needs_review"
  metadata: "data/needs_review/metadata.json"
  retraining:
    live: "data/retraining_set/live"
    spoof: "data/retraining_set/spoof"